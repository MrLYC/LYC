# Linux下的计划任务

## crontab
crontab命令用于执行例行的计划性任务。

### crontab启动
1. 快速设置规则：
```shell
crontab -e
```

1. 将规则文件放入**/etc/cron.d/**

### crontab规则

#### 栏位意义
| 栏位   | m    | h    | dom  | mon  | dow  | command |
| ---- | ---- | ---- | ---- | ---- | ---- | ------- |
| 解释   | 分钟   | 小时   | 日期   | 月份   | 周    | 系统命令    |
| 范围   | 0-59 | 0-23 | 1-31 | 1-12 | 0-7  | *       |
*注意：周的取值为0或7时都代表周天*

#### 特殊字符
| 符号   | *    | ,    | -    | /    |
| ---- | ---- | ---- | ---- | ---- |
| 意义   | 任意时间 | 时段分割 | 时间范围 | 频率分割 |

#### 快捷选项
- **@reboot**：在启动的时候执行一次。
- **@yearly**：相当于`0 0 1 1 *`，一月一号执行。
- **@annually**：同上，一年执行一次。
- **@monthly**：相当于`0 0 1 * *`，一个月的第一天凌晨执行。
- **@weekly**：相当于`0 0 * * 0`，周天凌晨执行。
- **@daily**：相当于`0 0 * * *`，每天凌晨执行。
- **@midnight**：同上，每天午夜执行。
- **@hourly**：相当于`0 * * * *`，每小时执行。

#### 示例
- 工作日每天10点自动签到：`0	10	*	*	1-5	checkin`
  - 工作时间每隔半个小时更新tags：`*/309-12,14-19	*	*	*	ctags -R`

## at
at命令用于执行一次性任务。

### at启动
at的设置是交互式的，设置好时间后进入at的交互模式输入命令，完成后输入<C-d>保存退出。

#### 时间规则
- **HH:MM**：指定最近执行满足的时间，`04:00`。
- **HH:MM YYYY-MM-DD**/**HH:MM[am|pm] [Month] [Date]**：指定下次执行的具体时间，`04:00 2009-03-17`/`04pm March 17`。
- **HH:MM[am|pm] + number [minutes|hours|days|weeks]**：在指定时间后延时一定时间执行，`04pm + 3 days`。
- **now + number [minutes|hours|days|weeks]**：以当前时间为准设置延时，`now + 5 minutes`。
